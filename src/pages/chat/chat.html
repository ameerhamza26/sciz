<!--
  Generated template for the ChatPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="headersection">

  <ion-navbar>

    <ion-title>
      <h2><small>{{provider.name}}</small></h2>
    </ion-title>


  </ion-navbar>


</ion-header>


<ion-content class="chat" padding>
  <div #scrollMe id="chatMessages">
    <div class="message" *ngFor="let message of messages">
      <div [class]="message.user == user.code ? 'innerMessage messageRight' : 'innerMessage messageLeft' ">
        <div *ngIf="message.image == false" class="message">{{message.message}}</div>
        <div *ngIf="message.image == false" class="timestamp">{{message.timestamp.slice(0,21)}}</div>
        <div *ngIf="message.image == true">
          <a class="imgzoom" (click)="openModal({imageurl : message.message})">
            <img class="imagemessage" src="{{message.message}}"  style="object-fit: cover;">
          </a>
        </div>
        <div *ngIf="message.image == true" class="timestamp">{{message.timestamp.slice(0,21)}}</div>


      </div>
    </div>
  </div>
</ion-content>

<ion-footer class="textarea">
  <ion-toolbar>
    <ion-buttons left padding-left>
      <button ion-button icon-left color="main" (click)="selectChatImage()">
        <ion-icon style="font-size: 30px;" name="image"></ion-icon>
      </button>
    </ion-buttons>


    <ion-input left type="text" [(ngModel)]="message" placeholder="Write a message...">
    </ion-input>

    <ion-buttons end padding-right>
      <button ion-button icon-right color="main" (click)="sendMessage()" [disabled]="message == ''">
        <ion-icon style="font-size: 30px;" name="send"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
